<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Dialog State Tracking Challenge (YARBUS) by jeremyfix</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Yet Another Rule Based Belief Update System (YARBUS)</h1>
      <h2 class="project-tagline">Dialog State Tracking Challenge viewer and Yarbus tracker</h2>
      <a href="https://github.com/jeremyfix/dstc" class="btn">View on GitHub</a>
      <a href="https://github.com/jeremyfix/dstc/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jeremyfix/dstc/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
	<!--<a id="yet-another-rule-based-belief-tracker-update-system-yarbus" class="anchor" href="#yet-another-rule-based-belief-tracker-update-system-yarbus" aria-hidden="true"><span class="octicon octicon-link"></span></a>Yet Another Rule Based Belief Tracker Update System (YARBUS)</h1>-->

	<h1>Set up</h1>

	<p>On this page you will find all the elements required to reproduce the elements of the paper. For any information about what you find in the repository or about the paper, please contact Jeremy Fix <a href="https://github.com/jeremyfix" class="user-mention">@jeremyfix</a> .</p>

	<p>First, some general comments, to get all the elements of the repository :</p>

	<pre><code>
	    cd your_repo_root
	    git clone https://github.com/jeremyfix/dstc.git
	    cd dstc
	    mkdir build
	    cd build
	    ------ 
	    cmake .. -DDSTC_Viewer=ON && make
	    --OR-- 
	    cmake .. && make  // to avoid building the viewer which requires Qt
	    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:./src
	    // You are ready to play with the tools of the package
	</code></pre>

	<p>
	  You can play around with :
	  <ul>
	    <li>./src/statistics which computes statistics given flist input files</li>
	    <li>./src/viewer  to explore the datasets and tracker outputs</li>
	    <li>./examples/example-xxxx to play with Yarbus and some other stuff for comparing trackers, filtering out flist, ...</li>
	  </ul>
	</p>

	All the elements of the package are somehow dedicated to process data from the <a href="http://camdial.org/~mh521/dstc/">Dialog State Tracking Challenge</a> 2 and 3 (at least)

	<h1>Yarbus</h1>

<h2>Basic usage</h2>
<p>
Yarbus is a simple rule based belief tracker you can run on the dialogues from the DSTC2 and DSTC3. In the repository, Yarbus is provided as several scripts :
<ul>
<li>examples/yarbus is the tracker, producing the JSON tracker output for the joint goals, requested slots and methods</li>
<li>examples/yarbus-with-labels is the tracker making use of the labels to compute some statistics on the fly</li>
<li>examples/yarbus-rule-set is the tracker and you can specify which rule set to use</li>
<li>examples/yarbus-semantics is the tracker run over the semantics field of the labels, simulating a perfect SLU</li>
</ul>
</p>

<p>
Basically, to run the tracker with a threshold of the belief of 0.01 on DSTC2 :
<pre><code>
./examples/yarbus ~/DSTC/scripts/config/dstc2_test.flist ~/DSTC/scripts/config/ontology_dstc2.json 0.01 0
</code></pre>
If you want to see the output of the tracker on a specific dialog, say voip-28848c294, you simply call :
<pre><code>
./examples/yarbus ~/DSTC/scripts/config/dstc2_test.flist ~/DSTC/scripts/config/ontology_dstc2.json 0.01 1 voip-28848c294 
</code></pre>
The other scripts take more or less the same parameters, just run it, there is an help message.
</p>

<h2>Varying the rule set</h2>

<p>
In the paper, we varied the set of rules being used. This can be achieved with yarbus-rule-set. You need to specify a rule set defined as an integer that we convert as a binary code for selecting the rules. There are five rules, let us denote the rule set number as r0r1r2r3r4. The ri in {0, 1} indicates if we activate or not a rule with :
<ul>
<li>r0 : the inform rule</li>
<li>r1 : the expl conf rule</li>
<li>r2 : the impl-conf rule</li>
<li>r3 : the deny rule</li>
<li>r4 : the negate rule</li>
</ul>
</p>

<p>
As we saw in experiments, most of the score is achieved by activating only the inform and expl-conf rules (i.e. rule number 24) and if, in addition you set the belief threshold to 0.01, so~:
<pre><code>
./examples/yarbus-rule-set ~/DSTC/scripts/config/dstc2_test.flist ~/DSTC/scripts/config/ontology_dstc2.json 0.01 0 24
</code></pre>
</p>

The generated tracker output can then be scored with the scoring functions of the challenges; something like :
<pre><code>
python score.py --dataset dstc2_test --dataroot ~/DSTC/data --ontology ~/DSTC/scripts/config/ontology_dstc2.json --trackfile dstc2_test-output.json --scorefile scores.csv 
python report.py --scorefile scores.csv
</pre></code>

On the LIVE SLU, you should get, on the joint goals, something like (Acc : 0.7247394; L2 : 0.4413819; ROC : 0.0001424). On the SJTU+sys SLU, the performances are better (Acc : 0.7592115; L2 : 0.3618278; ROC : 0.3189233). Actually, you could even slightly increase the accuracy to 76.2 by blocking the negate rule in case the user is informing a slot for which the expl-conf is considered. But that is only 0.3 %, so let us keep it simple.

<h2>A port in python</h2>

In the repository, there is a python script baseline-yarbus.py which follows the same structure than the other baselines submitted to the challenges. However, be warned that the python script is much slower than the C++ code and it does not include the possibility to vary the rule set as well. In short, we advise you to use the C++ script.

	<h1>Statistics</h1>
<p>
	In order to check out which dialog acts are used and with slot/value pairs, you can run the src/statistics scripts. It generates latex outputs ready to be compiled two times with pdflatex. It basically generates histograms on the acts and the slot/value pairs involved.
</p>
<center>
<img src="./Pics/statistics.JPG">
</center>

	<h1>The Viewer</h1>

<p>Just launch viewer as src/viewer, load an ontology, dialog filelists, tracker output if you wish and explore the data. </p>

<center>
<img src="./Pics/viewer.png">
</center>

	<footer class="site-footer">
          <span class="site-footer-owner"><a href="https://github.com/jeremyfix/dstc">Dstc</a> is maintained by <a href="https://github.com/jeremyfix">jeremyfix</a>.</span>

          <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
	</footer>

    </section>

    
  </body>
</html>

